<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beer Translate</title>
    <style>
        body {
            background-color: #121316;
            color: #e8eaed;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden; 
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
        }

        .title-container {
            margin-bottom: 20px;
            display: flex;
            align-items: baseline;
            gap: 10px;
        }

        h1 { font-weight: 400; font-size: 32px; color: #bdc1c6; margin: 0; }
        
        /* Стили для секретных ссылок в буквах B и r */
        .secret-link { 
            color: inherit; 
            text-decoration: none; 
            cursor: pointer; 
            transition: color 0.2s;
        }
        .secret-link:hover { color: #8ab4f8; }

        .author-tag { font-size: 14px; color: #5f6368; font-weight: 500; opacity: 0.7; }

        .translator-container {
            background-color: #1e1f21;
            border: 1px solid #3c4043;
            border-radius: 12px;
            width: 95%;
            max-width: 1100px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
        }

        .header-tabs {
            display: flex;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid #3c4043;
            height: 55px;
        }

        .tab { 
            color: #8ab4f8; font-size: 14px; font-weight: 500; 
            border-bottom: 2px solid #8ab4f8; height: 100%; 
            display: flex; align-items: center; padding: 0 10px; 
        }
        
        .tab.inactive { border-bottom: 2px solid transparent; color: #9aa0a6; }
        .swap-icon { margin: 0 20px; color: #9aa0a6; cursor: pointer; font-size: 24px; }

        .gravity-tab {
            margin-left: auto;
            color: #9aa0a6;
            font-size: 13px;
            text-transform: uppercase;
            font-weight: bold;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 4px;
        }
        
        .gravity-tab:hover { color: #fff; background: rgba(255,255,255,0.05); }

        .main-panels { display: flex; flex-wrap: wrap; }
        .panel { flex: 1; min-width: 300px; min-height: 250px; padding: 25px; position: relative; display: flex; flex-direction: column; background: #1e1f21; box-sizing: border-box;}
        .input-panel { border-right: 1px solid #3c4043; }

        textarea {
            width: 100%; height: 100%; background: transparent; border: none;
            color: #fff; font-size: 22px; resize: none; outline: none; font-family: inherit;
        }

        #output-field { font-size: 22px; color: #bdc1c6; word-break: break-all; white-space: pre-wrap; flex-grow: 1; margin-bottom: 30px; min-height: 1.2em; }

        .clear-btn { position: absolute; top: 20px; right: 20px; color: #9aa0a6; cursor: pointer; font-size: 22px; }
        
        .panel-footer { 
            position: absolute; 
            bottom: 12px; 
            right: 12px; 
            display: flex; 
            align-items: center; 
            gap: 12px; 
        }

        .old-version-btn {
            color: #8ab4f8;
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            padding: 6px 14px;
            border: 1px solid #3c4043;
            border-radius: 20px;
            transition: all 0.2s;
        }

        .old-version-btn:hover {
            background: rgba(138, 180, 248, 0.08);
            border-color: #8ab4f8;
        }

        .copy-btn { background: transparent; border: none; color: #9aa0a6; cursor: pointer; padding: 8px; border-radius: 50%; transition: all 0.2s; display: flex; align-items: center; justify-content: center; }
        .copy-btn svg { width: 24px; height: 24px; fill: currentColor; }
    </style>
</head>
<body>

    <div class="title-container">
        <h1>
            <a href="https://www.roblox.com/games/111530421351096/You-VS-Homer" class="secret-link">B</a>ee<a href="https://beerlanguage.ru/rat/" class="secret-link">r</a> Translate
        </h1>
        <span class="author-tag">by spiderkaras</span>
    </div>

    <div class="translator-container">
        <div class="header-tabs">
            <div class="tab" id="left-label">Текст</div>
            <div class="swap-icon" onclick="toggleMode()">⇄</div>
            <div class="tab inactive" id="right-label">Пивной язык</div>
            <div class="gravity-tab" onclick="startGravity()">Gravity</div>
        </div>

        <div class="main-panels">
            <div class="panel input-panel">
                <div class="clear-btn" onclick="clearAll()">✕</div>
                <textarea id="input-text" placeholder="Введите текст..." oninput="doTranslate()"></textarea>
            </div>
            <div class="panel">
                <div id="output-field"></div>
                <div class="panel-footer">
                    <a href="https://beerlanguage.ru/old/" class="old-version-btn">Old version</a>
                    <button class="copy-btn" id="copy-btn" onclick="copyResult()">
                        <svg id="copy-icon" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

<script>
    /* ПЕРЕВОДЧИК И ФИЗИКА (БЕЗ ИЗМЕНЕНИЙ) */
    const beerMap = {'А': 'влдаолдцт3894', 'Б': '78ем9т4325243895тм72', 'В': 'атдлжиыфвеи0653', 'Г': 'тмщышевз34', 'Д': '34три537уиадлвы', 'Е': 'ь02м392м7', 'Ё': 'ь02м392м8', 'Ж': 'тт32м4о35т2', 'З': '3и45рт647ь8', 'И': '49и357т7т50иц7', 'Й': '49и357т7т50иц8', 'К': 'тй89и5446', 'Л': '7ьт47тть75', 'М': '7ь65бь47456ь7', 'Н': '8674ь5б867куекв', 'О': 'ь7т3567о5643654', 'П': 'т76376534ывтн', 'Р': 'вьтапгь67767ь5ке', 'С': 'пиавые54', 'Т': 'т65436отекнр', 'У': '6т54у65т6цу3', 'Ф': '74567о5тнит7546', 'Х': '547т456756т85', 'Ц': '7ль564л7от546р546', 'Ч': '87645ьт5куьлнаенген', 'Ш': 'аеткуну45654н', 'Щ': 'аеткуну45654н1', 'Ъ': '22987т6и0222лвдпфы1', 'Ы': '22987т6и0222лвдпфы3', 'Ь': '22987т6и0222лвдпфы2', 'Э': '638ь54и96346и0345', 'Ю': 'е0ц4539и587т3450879345', 'Я': 'еьекутнтек6ня', 'A': 'z99x11v', 'B': 'bb77beer00', 'C': 'c_shakal_99', 'D': 'd88_vottak_2', 'E': 'e_pivo_1', 'F': 'f_44_ff', 'G': 'g_top_g_7', 'H': 'h_hh_888', 'I': 'i_eye_111', 'J': 'j_jack_55', 'K': 'k_kick_0', 'L': 'l_lose_77', 'M': 'm_m_444555', 'N': 'n_nitro_9', 'O': 'o_zero_00', 'P': 'p_pub_4', 'Q': 'q_quest_1', 'R': 'r_root_66', 'S': 's_snk_33', 'T': 't_tank_4', 'U': 'u_unit_22', 'V': 'v_v_666', 'W': 'w_wow_7', 'X': 'x_xxx_0', 'Y': 'y_yes_9', 'Z': 'z_zzz_1'};
    const reverseCodes = Object.entries(beerMap).map(([letter, code]) => ({ letter, code })).sort((a, b) => b.code.length - a.code.length);
    let isBeerToText = false;

    function toggleMode() { 
        isBeerToText = !isBeerToText; 
        document.getElementById('left-label').innerText = isBeerToText ? 'Пивной язык' : 'Текст'; 
        document.getElementById('right-label').innerText = isBeerToText ? 'Текст' : 'Пивной язык'; 
        clearAll(); 
    }

    function doTranslate() { 
        const input = document.getElementById('input-text').value; 
        const output = document.getElementById('output-field'); 
        if (!input) { output.innerText = ''; return; } 
        if (!isBeerToText) {
            let result = ''; for (let char of input.toUpperCase()) { result += beerMap[char] || char; } output.innerText = result;
        } else {
            let result = ''; let i = 0; while (i < input.length) {
                let found = false; for (let item of reverseCodes) {
                    if (input.substr(i, item.code.length) === item.code) { result += item.letter; i += item.code.length; found = true; break; }
                }
                if (!found) { result += input[i]; i++; }
            }
            output.innerText = result.toLowerCase();
        }
    }

    function clearAll() { document.getElementById('input-text').value = ''; document.getElementById('output-field').innerText = ''; }

    function copyResult() { 
        const text = document.getElementById('output-field').innerText; 
        if (!text) return;
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.getElementById('copy-btn');
            const svg = document.getElementById('copy-icon');
            const originalIcon = svg.innerHTML;
            svg.innerHTML = '<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>';
            btn.style.color = '#8ab4f8';
            setTimeout(() => { svg.innerHTML = originalIcon; btn.style.color = ''; }, 2000);
        });
    }

    let gravityActive = false;
    let physicsObjects = [];
    let dragTarget = null;
    let dragOffset = { x: 0, y: 0 };
    let mouse = { x: 0, y: 0 };
    let prevMouse = { x: 0, y: 0 };

    function startGravity() {
        if (gravityActive) return;
        gravityActive = true;
        const selectors = ['.title-container', '.input-panel', '.panel:last-child', '.translator-container', '.header-tabs > div', '.swap-icon', '.old-version-btn'];
        let elements = [];
        selectors.forEach(s => document.querySelectorAll(s).forEach(el => elements.push(el)));

        elements.forEach(el => {
            const rect = el.getBoundingClientRect();
            physicsObjects.push({
                el: el, x: rect.left, y: rect.top, w: rect.width, h: rect.height,
                vx: (Math.random() - 0.5) * 5, vy: 0, rot: 0, vrot: 0,
                bounciness: 0.4, isDragging: false
            });
        });

        physicsObjects.forEach(obj => {
            const el = obj.el;
            el.style.width = obj.w + 'px'; el.style.height = obj.h + 'px';
            el.style.position = 'absolute'; el.style.left = '0'; el.style.top = '0';
            el.style.margin = '0'; el.style.zIndex = '1000';
            document.body.appendChild(el);
        });

        window.addEventListener('mousedown', e => handleStart(e.clientX, e.clientY));
        window.addEventListener('mousemove', e => handleMove(e.clientX, e.clientY));
        window.addEventListener('mouseup', handleEnd);
        window.addEventListener('touchstart', e => handleStart(e.touches[0].clientX, e.touches[0].clientY));
        window.addEventListener('touchmove', e => handleMove(e.touches[0].clientX, e.touches[0].clientY));
        window.addEventListener('touchend', handleEnd);
        requestAnimationFrame(update);
    }

    function handleStart(x, y) {
        mouse.x = prevMouse.x = x; mouse.y = prevMouse.y = y;
        for (let i = physicsObjects.length - 1; i >= 0; i--) {
            const o = physicsObjects[i];
            if (x > o.x && x < o.x + o.w && y > o.y && y < o.y + o.h) {
                dragTarget = o; o.isDragging = true;
                dragOffset.x = x - o.x; dragOffset.y = y - o.y;
                o.el.style.zIndex = '2000';
                break;
            }
        }
    }

    function handleMove(x, y) { mouse.x = x; mouse.y = y; }
    function handleEnd() {
        if (dragTarget) {
            dragTarget.isDragging = false;
            dragTarget.vx = (mouse.x - prevMouse.x) * 0.8;
            dragTarget.vy = (mouse.y - prevMouse.y) * 0.8;
            dragTarget.vrot = dragTarget.vx * 0.05;
            dragTarget.el.style.zIndex = '1000';
            dragTarget = null;
        }
    }

    function update() {
        const sw = window.innerWidth;
        const sh = window.innerHeight;
        physicsObjects.forEach(o => {
            if (o.isDragging) {
                o.x = mouse.x - dragOffset.x; o.y = mouse.y - dragOffset.y;
            } else {
                o.vy += 0.4; o.vx *= 0.99; o.vrot *= 0.98;
                o.x += o.vx; o.y += o.vy; o.rot += o.vrot;
                if (o.y + o.h > sh) { o.y = sh - o.h; o.vy *= -o.bounciness; o.vx *= 0.8; o.vrot *= 0.8; }
                if (o.x < 0 || o.x + o.w > sw) { o.x = o.x < 0 ? 0 : sw - o.w; o.vx *= -o.bounciness; }
            }
            o.el.style.transform = `translate(${o.x}px, ${o.y}px) rotate(${o.rot}deg)`;
        });
        prevMouse.x = mouse.x; prevMouse.y = mouse.y;
        requestAnimationFrame(update);
    }
</script>
</body>
</html>
